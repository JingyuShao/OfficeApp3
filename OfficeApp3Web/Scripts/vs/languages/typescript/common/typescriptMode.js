/*!-----------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.1.0(6c0fe2014e7a7d596ac1af21f25bf2fc17da8a75)
 * Released under the MIT license
 * https://github.com/Microsoft/vscode/blob/master/LICENSE.txt
 *-----------------------------------------------------------*/
define("vs/nls!vs/languages/typescript/common/features/quickFixMainActions",["vs/nls","vs/nls!vs/languages/typescript/common/typescriptMode"],function(e,t){return e.create("vs/languages/typescript/common/features/quickFixMainActions",t)});var __decorate=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,s=3>i?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(3>i?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},__param=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}};define("vs/languages/typescript/common/features/quickFixMainActions",["require","exports","vs/nls!vs/languages/typescript/common/features/quickFixMainActions","vs/base/common/winjs.base","vs/platform/files/common/files","vs/platform/request/common/request","vs/platform/workspace/common/workspace"],function(e,t,r,o,n,i,s){"use strict";var a=function(){function e(e,t,r){this._requestService=e,this._fileService=t,this._contextService=r}return e.prototype.evaluate=function(e,t,r){var n=r.command.arguments[0];switch(n.type){case"typedefinitions":return this.evaluateAddTypeDefinitionProposal(n.name,e)}return o.TPromise.as(null)},e.prototype.evaluateAddTypeDefinitionProposal=function(e,t){var n=this,i="typings/"+e,s=this._contextService.toResource(i),a=this._contextService.toResource("jsconfig.json");if(!s||!a)return o.TPromise.as(null);var c=this._contextService.toWorkspaceRelativePath(t);return c||(c=t.fsPath),this._fileService.resolveFile(s).then(function(e){return{message:r.localize(0,null,i)}},function(t){var o="https://raw.githubusercontent.com/borisyankov/DefinitelyTyped/master/"+e;return n._requestService.makeRequest({url:o,followRedirects:5}).then(function(e){return n._fileService.createFile(s,e.responseText).then(function(e){return n._fileService.resolveFile(a).then(function(e){return{message:r.localize(1,null,i)}},function(e){return{message:r.localize(2,null,i)}})},function(e){return{message:r.localize(3,null,i,e.toString())}})},function(e){return{message:r.localize(4,null,o,e.responseText)}})})},e=__decorate([__param(0,i.IRequestService),__param(1,n.IFileService),__param(2,s.IWorkspaceContextService)],e)}();t.QuickFixMainActions=a}),define("vs/languages/typescript/common/features/tokenization",["require","exports","vs/base/common/strings","vs/base/common/arrays","vs/base/common/collections","vs/editor/common/modes/supports","vs/languages/typescript/common/lib/typescriptServices","vs/editor/common/modes/abstractState"],function(e,t,r,o,n,i,s,a){"use strict";function c(e,t){var r=s.createClassifier(),o=t===l.TypeScript?f:m,n=t===l.TypeScript?h:g;return{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new d(e,null,t,0,!1)},tokenize:function(e,t,i,s){return u(o,n,r,t,e,i,s)}}}function u(e,t,n,a,c,u,f){function h(e,t){(0===m.tokens.length||o.tail(m.tokens).type!==t)&&m.tokens.push(new i.Token(e,t))}void 0===u&&(u=0);var m={tokens:[],actualStopOffset:u+c.length,endState:new d(a.getMode(),a.getStateData(),a.language,0,!1),modeTransitions:[{startIndex:u,mode:a.getMode()}]},g=a.language===l.TypeScript;if(!g&&p(a,u,c,h))return m;var y=n.getClassificationsForLine(c,a.eolState,!0),_=0;m.endState.eolState=y.finalLexState,m.endState.inJsDocComment=1===y.finalLexState&&(a.inJsDocComment||/\/\*\*.*$/.test(c));for(var v=0,k=y.entries;v<k.length;v++){var S,A=k[v];if(A.classification===s.TokenClass.Punctuation){var T=c.charCodeAt(_);S=e[T]||t[A.classification],h(_+u,S)}else A.classification===s.TokenClass.Comment?m.endState.inJsDocComment||/\/\*\*.*\*\//.test(c.substr(_,A.length))?h(_+u,g?"comment.doc.ts":"comment.doc.js"):h(_+u,g?"comment.ts":"comment.js"):h(_+u,t[A.classification]||r.empty);_+=A.length}return m}function p(e,t,r,o){return 0===r.indexOf("#!")?(o(t,"comment.shebang"),!0):void 0}!function(e){e[e.TypeScript=0]="TypeScript",e[e.EcmaScript5=1]="EcmaScript5"}(t.Language||(t.Language={}));var l=t.Language;t.createTokenizationSupport=c;var d=function(){function e(e,t,r,o,n){this._mode=e,this._state=t,this.language=r,this.eolState=o,this.inJsDocComment=n}return e.prototype.clone=function(){return new e(this._mode,a.AbstractState.safeClone(this._state),this.language,this.eolState,this.inJsDocComment)},e.prototype.equals=function(t){return t===this?!0:t&&t instanceof e?this.eolState!==t.eolState?!1:this.inJsDocComment!==t.inJsDocComment?!1:a.AbstractState.safeEquals(this._state,t._state):!1},e.prototype.getMode=function(){return this._mode},e.prototype.tokenize=function(e){throw new Error},e.prototype.getStateData=function(){return this._state},e.prototype.setStateData=function(e){this._state=e},e}(),f=n.createNumberDictionary();f["(".charCodeAt(0)]="delimiter.parenthesis.ts",f[")".charCodeAt(0)]="delimiter.parenthesis.ts",f["{".charCodeAt(0)]="delimiter.bracket.ts",f["}".charCodeAt(0)]="delimiter.bracket.ts",f["[".charCodeAt(0)]="delimiter.array.ts",f["]".charCodeAt(0)]="delimiter.array.ts";var h=n.createNumberDictionary();h[s.TokenClass.Identifier]="identifier.ts",h[s.TokenClass.Keyword]="keyword.ts",h[s.TokenClass.Operator]="delimiter.ts",h[s.TokenClass.Punctuation]="delimiter.ts",h[s.TokenClass.NumberLiteral]="number.ts",h[s.TokenClass.RegExpLiteral]="regexp.ts",h[s.TokenClass.StringLiteral]="string.ts";var m=n.createNumberDictionary();m["(".charCodeAt(0)]="delimiter.parenthesis.js",m[")".charCodeAt(0)]="delimiter.parenthesis.js",m["{".charCodeAt(0)]="delimiter.bracket.js",m["}".charCodeAt(0)]="delimiter.bracket.js",m["[".charCodeAt(0)]="delimiter.array.js",m["]".charCodeAt(0)]="delimiter.array.js";var g=n.createNumberDictionary();g[s.TokenClass.Identifier]="identifier.js",g[s.TokenClass.Keyword]="keyword.js",g[s.TokenClass.Operator]="delimiter.js",g[s.TokenClass.Punctuation]="delimiter.js",g[s.TokenClass.NumberLiteral]="number.js",g[s.TokenClass.RegExpLiteral]="regexp.js",g[s.TokenClass.StringLiteral]="string.js"});var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,s=3>i?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(3>i?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},__param=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}};define("vs/languages/typescript/common/typescriptMode",["require","exports","vs/nls!vs/languages/typescript/common/typescriptMode","vs/base/common/winjs.base","vs/base/common/uri","vs/editor/common/editorCommon","vs/editor/common/modes","vs/base/common/lifecycle","vs/base/common/async","vs/languages/typescript/common/features/tokenization","vs/languages/typescript/common/features/quickFixMainActions","vs/languages/typescript/common/typescript","vs/editor/common/modes/abstractMode","vs/editor/common/services/modelService","vs/platform/thread/common/threadService","vs/platform/instantiation/common/descriptors","vs/platform/telemetry/common/telemetry","vs/platform/thread/common/thread","vs/platform/instantiation/common/instantiation","vs/editor/common/modes/supports/richEditSupport","vs/editor/common/modes/supports/declarationSupport","vs/editor/common/modes/supports/referenceSupport","vs/editor/common/modes/supports/parameterHintsSupport","vs/editor/common/modes/supports/suggestSupport"],function(e,t,r,o,n,i,s,a,c,u,p,l,d,f,h,m,g,y,_,v,k,S,A,T){"use strict";t.tokenization=u;var C=function(){function e(e,t){var r=this;this._listener=Object.create(null),this._lastValidationReq=0,this._modelService=t,this._mode=e,this._validation=new c.RunOnceScheduler(this._doValidate.bind(this),750),this._modelService&&(this._modelService.onModelAdded(this._onModelAdded,this),this._modelService.onModelRemoved(this._onModelRemoved,this),this._modelService.onModelModeChanged(function(e){r._onModelRemoved(e.model),r._onModelAdded(e.model)},this),this._modelService.getModels().forEach(this._onModelAdded,this))}return e.prototype.dispose=function(){this._validation.dispose()},e.prototype.validateOpen=function(){this._scheduleValidation()},e.prototype._scheduleValidation=function(e){this._lastValidationReq+=1,this._lastChangedResource=e,this._validation.schedule()},e.prototype._doValidate=function(){var e=this,t=[];this._lastChangedResource&&t.push(this._lastChangedResource);for(var r in this._listener)this._lastChangedResource&&r===this._lastChangedResource.toString()||t.push(n["default"].parse(r));var i=this._lastValidationReq,s=c.sequence(t.map(function(t){return function(){return e._modelService.getModel(t)?i===e._lastValidationReq?e._mode.performSemanticValidation(t):void 0:o.TPromise.as(void 0)}}));s.done(void 0,function(e){return console.warn(e)})},e.prototype._onModelAdded=function(e){var t=this;if(this._mode._shouldBeValidated(e)){var r,o;r=function(){t._scheduleValidation(e.getAssociatedResource())},o=e.addListener(i.EventType.ModelContentChanged2,function(e){return r()}),this._listener[e.getAssociatedResource().toString()]=o,r()}},e.prototype._onModelRemoved=function(e){var t=this._listener[e.getAssociatedResource().toString()];t&&(t(),delete this._listener[e.getAssociatedResource().toString()])},e=__decorate([__param(1,f.IModelService)],e)}(),P=function(t){function n(e,r,n,i){var a=this;if(t.call(this,e.id),this._disposables=[],this._threadService=n,this._instantiationService=r,this._telemetryService=i,this._modeWorkerManager=this._createModeWorkerManager(e,r),this._threadService&&this._threadService.isInMainThread){this._semanticValidator=r.createInstance(C,this),this._disposables.push(this._semanticValidator);var c=this._getProjectResolver();if(!c)throw new Error("missing project resolver!");c instanceof m.AsyncDescriptor?this._projectResolver=r.createInstance(c,this).then(void 0,function(e){return console.error(e),l.Defaults.ProjectResolver}):this._projectResolver=o.TPromise.as(c),this._projectResolver=this._projectResolver.then(function(e){return e.setConsumer(a),e})}this.configSupport=this,this.extraInfoSupport=this,this.occurrencesSupport=this,this.formattingSupport=this,this.quickFixSupport=this,this.logicalSelectionSupport=this,this.outlineSupport=this,this.emitOutputSupport=this,this.renameSupport=this,this.tokenizationSupport=u.createTokenizationSupport(this,u.Language.TypeScript),this.richEditSupport=new v.RichEditSupport(this.getId(),null,{wordPattern:d.createWordRegExp("$"),comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:s.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:s.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:s.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:s.IndentAction.None,removeText:1}}],__electricCharacterSupport:{docComment:{scope:"comment.doc",open:"/**",lineStart:" * ",close:" */"}},__characterPairSupport:{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`"}]}}),this.referenceSupport=new S.ReferenceSupport(this.getId(),{tokens:["identifier.ts"],findReferences:function(e,t,r){return a.findReferences(e,t,r)}}),this.declarationSupport=new k.DeclarationSupport(this.getId(),{tokens:["identifier.ts","string.ts","attribute.value.vs"],findDeclaration:function(e,t){return a.findDeclaration(e,t)}}),this.parameterHintsSupport=new A.ParameterHintsSupport(this.getId(),{triggerCharacters:["(",","],excludeTokens:["string.ts"],getParameterHints:function(e,t){return a.getParameterHints(e,t)}}),this.suggestSupport=new T.SuggestSupport(this.getId(),{triggerCharacters:["."],excludeTokens:["string","comment","number"],suggest:function(e,t){return a.suggest(e,t)},getSuggestionDetails:function(e,t,r){return a.getSuggestionDetails(e,t,r)}})}return __extends(n,t),n.prototype.creationDone=function(){this._threadService.isInMainThread&&this._pickAWorkerToValidate()},n.prototype._createModeWorkerManager=function(e,t){return new d.ModeWorkerManager(e,"vs/languages/typescript/common/typescriptWorker2","TypeScriptWorker2",null,t)},n.prototype._worker=function(e){return this._modeWorkerManager.worker(e)},n.prototype.dispose=function(){this._disposables=a.disposeAll(this._disposables)},n.prototype._shouldBeValidated=function(e){return e.getMode()===this||/\.ts$/.test(e.getAssociatedResource().fsPath)},n.prototype._getProjectResolver=function(){return l.Extensions.getProjectResolver()||l.Defaults.ProjectResolver},n.prototype.acceptProjectChanges=function(e){return this._semanticValidator.validateOpen(),this._doAcceptProjectChanges(e)},n.prototype._doAcceptProjectChanges=function(e){return this._worker(function(t){return t.acceptProjectChanges(e)})},n.prototype.acceptFileChanges=function(e){for(var t=this,n=0,i=0,s=e;i<s.length;i++){var a=s[i];a.content&&(n+=a.content.length)}return this._canAcceptFileChanges(n).then(function(n){return n===!1?o.TPromise.wrapError(r.localize(0,null)):t._doAcceptFileChanges(e).then(function(e){return t._semanticValidator.validateOpen(),e})})},n.prototype._canAcceptFileChanges=function(e){return this._worker(function(t){return t.canAcceptFileChanges(e)})},n.prototype._doAcceptFileChanges=function(e){return this._worker(function(t){return t.acceptFileChanges(e)})},n.prototype._defaultLib=function(){var t=this;if(!this._defaultLibPromise){var r=[],n=new o.TPromise(function(t,r){return e([l.defaultLib.path.substr(1)],t,r)}).then(function(e){r.push({kind:l.ChangeKind.Added,resource:l.defaultLib,content:e})}),i=new o.TPromise(function(t,r){return e([l.defaultLibES6.path.substr(1)],t,r)}).then(function(e){r.push({kind:l.ChangeKind.Added,resource:l.defaultLibES6,content:e})});this._defaultLibPromise=o.TPromise.join([n,i]).then(function(e){return t.acceptFileChanges(r)})}return new c.ShallowCancelThenPromise(this._defaultLibPromise)},n.prototype._syncProjects=function(){var e=this;return this._projectResolver?this._defaultLib().then(function(t){return e._projectResolver}).then(function(e){return e.resolveProjects()}):void 0},n.prototype.superConfigure=function(e){return this._threadService.isInMainThread?this._configureWorkers(e):this._worker(function(t){return t._doConfigure(e)})},n.prototype.configure=function(e){var t=this,r=this.superConfigure(e);return this._semanticValidator&&r.then(function(e){return e&&t._semanticValidator.validateOpen()}),r},n.prototype._configureWorkers=function(e){return this._worker(function(t){return t._doConfigure(e)})},n.prototype._pickAWorkerToValidate=function(){return this._worker(function(e){return e.enableValidator()})},n.prototype.performSemanticValidation=function(e){var t=this;return this.doValidateSemantics(e).then(function(e){return e?t.getMissingFiles().then(function(e){return e?t._projectResolver.then(function(t){return t.resolveFiles(e)}):void 0}):void 0})},n.prototype.doValidateSemantics=function(e){return this._worker(function(t){return t.doValidateSemantics(e)})},n.prototype.getMissingFiles=function(){return this._worker(function(e){return e.getMissingFiles()})},n.prototype.getOutline=function(e){return this._worker(function(t){return t.getOutline(e)})},n.prototype.findOccurrences=function(e,t,r){return void 0===r&&(r=!1),this._worker(function(o){return o.findOccurrences(e,t,r)})},n.prototype.suggest=function(e,t){return this._worker(function(r){return r.suggest(e,t)})},n.prototype.getSuggestionDetails=function(e,t,r){return this._worker(function(o){return o.getSuggestionDetails(e,t,r)})},n.prototype.getParameterHints=function(e,t){return this._worker(function(r){return r.getParameterHints(e,t)})},n.prototype.getEmitOutput=function(e,t){return void 0===t&&(t=void 0),this._worker(function(r){return r.getEmitOutput(e,t)})},n.prototype.findReferences=function(e,t,r){return this._worker(function(o){return o.findReferences(e,t,r)})},Object.defineProperty(n.prototype,"filter",{get:function(){return["identifier.ts","string.ts"]},enumerable:!0,configurable:!0}),n.prototype.rename=function(e,t,r){return this._worker(function(o){return o.rename(e,t,r)})},n.prototype.runQuickFixAction=function(e,t,r){var o=this,n=this._instantiationService.createInstance(p.QuickFixMainActions);return n.evaluate(e,t,r).then(function(n){return n?n:o.runQuickFixActionInWorker(e,t,r)})},n.prototype.runQuickFixActionInWorker=function(e,t,r){return this._worker(function(o){return o.runQuickFixAction(e,t,r)})},n.prototype.getQuickFixes=function(e,t){return this._worker(function(r){return r.getQuickFixes(e,t)})},n.prototype.getRangesToPosition=function(e,t){return this._worker(function(r){return r.getRangesToPosition(e,t)})},n.prototype.findDeclaration=function(e,t){return this._worker(function(r){return r.findDeclaration(e,t)})},n.prototype.computeInfo=function(e,t){return this._worker(function(r){return r.computeInfo(e,t)})},Object.defineProperty(n.prototype,"autoFormatTriggerCharacters",{get:function(){return[";","}","\n"]},enumerable:!0,configurable:!0}),n.prototype.formatDocument=function(e,t){return this._worker(function(r){return r.formatDocument(e,t)})},n.prototype.formatRange=function(e,t,r){return this._worker(function(o){return o.formatRange(e,t,r)})},n.prototype.formatAfterKeystroke=function(e,t,r,o){return this._worker(function(n){return n.formatAfterKeystroke(e,t,r,o)})},n.$_doAcceptProjectChanges=h.AllWorkersAttr(n,n.prototype._doAcceptProjectChanges),n.$_canAcceptFileChanges=h.OneWorkerAttr(n,n.prototype._canAcceptFileChanges),n.$_doAcceptFileChanges=h.AllWorkersAttr(n,n.prototype._doAcceptFileChanges),n.$_configureWorkers=h.AllWorkersAttr(n,n.prototype._configureWorkers),n.$_pickAWorkerToValidate=h.OneWorkerAttr(n,n.prototype._pickAWorkerToValidate,n.prototype._syncProjects,y.ThreadAffinity.Group3),n.$doValidateSemantics=h.OneWorkerAttr(n,n.prototype.doValidateSemantics,n.prototype._syncProjects,y.ThreadAffinity.Group3),n.$getMissingFiles=h.OneWorkerAttr(n,n.prototype.getMissingFiles,n.prototype._syncProjects,y.ThreadAffinity.Group3),n.$getOutline=h.OneWorkerAttr(n,n.prototype.getOutline,n.prototype._syncProjects,y.ThreadAffinity.Group1),n.$findOccurrences=h.OneWorkerAttr(n,n.prototype.findOccurrences,n.prototype._syncProjects,y.ThreadAffinity.Group2),n.$suggest=h.OneWorkerAttr(n,n.prototype.suggest,n.prototype._syncProjects,y.ThreadAffinity.Group2),n.$getSuggestionDetails=h.OneWorkerAttr(n,n.prototype.getSuggestionDetails,n.prototype._syncProjects,y.ThreadAffinity.Group2),n.$getParameterHints=h.OneWorkerAttr(n,n.prototype.getParameterHints,n.prototype._syncProjects,y.ThreadAffinity.Group2),n.$getEmitOutput=h.OneWorkerAttr(n,n.prototype.getEmitOutput,n.prototype._syncProjects,y.ThreadAffinity.Group3),n.$findReferences=h.OneWorkerAttr(n,n.prototype.findReferences,n.prototype._syncProjects,y.ThreadAffinity.Group3),n.$rename=h.OneWorkerAttr(n,n.prototype.rename,n.prototype._syncProjects,y.ThreadAffinity.Group2),n.$runQuickFixActionInWorker=h.OneWorkerAttr(n,n.prototype.runQuickFixActionInWorker,n.prototype._syncProjects,y.ThreadAffinity.Group2),n.$getQuickFixes=h.OneWorkerAttr(n,n.prototype.getQuickFixes,n.prototype._syncProjects,y.ThreadAffinity.Group2),n.$getRangesToPosition=h.OneWorkerAttr(n,n.prototype.getRangesToPosition,n.prototype._syncProjects,y.ThreadAffinity.Group1),n.$findDeclaration=h.OneWorkerAttr(n,n.prototype.findDeclaration,n.prototype._syncProjects,y.ThreadAffinity.Group2),n.$computeInfo=h.OneWorkerAttr(n,n.prototype.computeInfo,n.prototype._syncProjects,y.ThreadAffinity.Group2),n.$formatDocument=h.OneWorkerAttr(n,n.prototype.formatDocument,n.prototype._syncProjects,y.ThreadAffinity.Group1),n.$formatRange=h.OneWorkerAttr(n,n.prototype.formatRange,n.prototype._syncProjects,y.ThreadAffinity.Group1),n.$formatAfterKeystroke=h.OneWorkerAttr(n,n.prototype.formatAfterKeystroke,n.prototype._syncProjects,y.ThreadAffinity.Group1),n=__decorate([__param(1,_.IInstantiationService),__param(2,y.IThreadService),__param(3,g.ITelemetryService)],n)}(d.AbstractMode);t.TypeScriptMode=P});
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/6c0fe2014e7a7d596ac1af21f25bf2fc17da8a75/vs\languages\typescript\common\typescriptMode.js.map
